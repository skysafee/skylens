<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SkyLens</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="iconlensnew192.png" type="image/png">
  <meta name="theme-color" content="#0f1724" />
</head>
<body class="theme-default no-auth">

  <header class="topbar" role="banner">
    <div class="topbar-inner">
      <div class="brand" aria-label="SkyLens">
        <svg width="28" height="28" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 2L2 7v6c0 5 6 9 10 9s10-4 10-9V7L12 2z"/></svg>
        <span class="app-name">SkyLens</span>
      </div>

      <div class="top-right">
        <select id="themeSelect" class="control theme-select" aria-label="Select theme">
          <option value="default">Default</option>
          <option value="dark">Dark</option>
          <option value="ocean">Ocean</option>
          <option value="sunset">Sunset</option>
        </select>

        <button id="logoutButton" class="icon-btn" aria-label="Logout" title="Logout" type="button">
          <svg class="icon-svg" viewBox="0 0 24 24" aria-hidden="true"><path d="M16 13v-2H7V8l-5 4 5 4v-3zM20 3h-8v2h8v14h-8v2h8a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z"/></svg>
        </button>
      </div>
    </div>
  </header>

  <div id="offlineStatus" class="offline-banner hidden" aria-hidden="true">You're offline</div>

  <div id="fullDropOverlay" class="full-drop-overlay hidden" aria-hidden="true">
    <div class="full-drop-inner" role="region" aria-label="Drop files to upload">
      <svg width="72" height="72" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 3v10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M7 10l5 5 5-5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
      <div class="drop-text-lg">Drop here to upload</div>
      <div class="drop-sub">Release to upload files to SkyLens</div>
    </div>
  </div>

  <main class="page" role="main">
    <noscript>
      <div style="margin:18px auto; max-width:900px; text-align:center; color:#ffdede; background:rgba(0,0,0,0.4); padding:10px; border-radius:8px;">
        SkyLens requires JavaScript. Please enable JavaScript to use the gallery.
      </div>
    </noscript>

    <section id="authSection" class="auth-wrap center-card" aria-labelledby="authTitle">
      <div class="auth-card" role="form" aria-describedby="authError">
        <h1 id="authTitle">Login to SkyLens</h1>

        <form id="loginForm" class="form">
          <div class="field">
            <label for="username" class="visually-hidden">Username</label>
            <input id="username" name="username" type="text" placeholder="Username" autocomplete="username" required />
          </div>

          <div class="field">
            <label for="password" class="visually-hidden">Password</label>
            <input id="password" name="password" type="password" placeholder="Password" autocomplete="current-password" required />
          </div>

          <div id="signupFields" class="hidden">
            <div class="field">
              <label for="confirmPassword" class="visually-hidden">Confirm password</label>
              <input id="confirmPassword" type="password" placeholder="Confirm password" autocomplete="new-password" />
            </div>
          </div>

          <div id="authError" class="form-error" aria-live="polite"></div>

          <div class="actions">
            <button id="authSubmitBtn" type="submit" class="btn primary">Continue</button>
            <button id="signupToggleBtn" type="button" class="btn ghost">Create account</button>
          </div>
        </form>
      </div>
    </section>

    <section id="gallerySection" class="gallery-wrap hidden" aria-live="polite">
      <div id="dropZone" class="dropzone hidden" aria-hidden="true">
        <div class="dropzone-inner">
          <input id="imageInput" type="file" accept="image/*" multiple class="hidden" />
          <div class="drop-text">Drag & drop images here or <button id="browseBtn" class="link" type="button">browse</button></div>
        </div>
      </div>

      <div id="gallery" class="gallery-grid" aria-live="polite" aria-label="Image gallery"></div>

      <div class="gallery-footer">
        <button id="loadMoreBtn" class="btn outline hidden" type="button">Load more</button>
        <div id="loadingSpinner" class="spinner hidden" aria-hidden="true" role="status" aria-label="Loading"></div>
      </div>
    </section>
  </main>

  <!-- LIGHTBOX -->
  <div id="lightbox" class="lightbox hidden" role="dialog" aria-modal="true" aria-label="Image viewer">
    <button class="lightbox-close icon-btn" aria-label="Close" title="Close" type="button">
      <svg class="icon-svg" viewBox="0 0 24 24" aria-hidden="true"><path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
    </button>

    <button class="lightbox-nav prev" aria-label="Previous" type="button">
      <svg class="icon-svg" viewBox="0 0 24 24"><path d="M15 6l-6 6 6 6" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" fill="none"/></svg>
    </button>

    <div class="lightbox-content">
      <!-- wrapper used by the script -->
      <div class="lightbox-image-wrap" aria-live="polite" role="region" aria-label="Image area"></div>

      <!-- actions moved to CSS; inline styles removed so CSS can fully control stacking/layout -->
      <div class="lightbox-actions">
        <button id="openNoteBtn" class="btn" aria-label="Open note" title="Note" type="button">
          <svg class="icon-svg" viewBox="0 0 24 24" aria-hidden="true"><path d="M24.98 30.009h-23v-25h14.050l2.022-1.948-0.052-0.052h-16.020c-1.105 0-2 0.896-2 2v25c0 1.105 0.895 2 2 2h23c1.105 0 2-0.895 2-2v-14.646l-2 1.909v12.736zM30.445 1.295c-0.902-0.865-1.898-1.304-2.961-1.304-1.663 0-2.876 1.074-3.206 1.403-0.468 0.462-13.724 13.699-13.724 13.699-0.104 0.106-0.18 0.235-0.219 0.38-0.359 1.326-2.159 7.218-2.176 7.277-0.093 0.302-0.010 0.631 0.213 0.851 0.159 0.16 0.373 0.245 0.591 0.245 0.086 0 0.172-0.012 0.257-0.039 0.061-0.020 6.141-1.986 7.141-2.285 0.132-0.039 0.252-0.11 0.351-0.207 0.631-0.623 12.816-12.618 13.802-13.637 1.020-1.052 1.526-2.146 1.507-3.253-0.019-1.094-0.55-2.147-1.575-3.129zM29.076 6.285c-0.556 0.574-4.914 4.88-12.952 12.798l-0.615 0.607c-0.921 0.285-3.128 0.994-4.796 1.532 0.537-1.773 1.181-3.916 1.469-4.929 1.717-1.715 13.075-13.055 13.506-13.48 0.084-0.084 0.851-0.821 1.795-0.821 0.536 0 1.053 0.244 1.577 0.748 0.627 0.602 0.95 1.179 0.959 1.72 0.010 0.556-0.308 1.171-0.943 1.827z" fill"currentColor"></svg>
        </button>

        <button id="deleteImageBtn" class="btn" aria-label="Delete image" title="Delete" type="button">
          <svg class="icon-svg" viewBox="0 0 24 24" aria-hidden="true"><path d="M13 4H8.8C7.11984 4 6.27976 4 5.63803 4.32698C5.07354 4.6146 4.6146 5.07354 4.32698 5.63803C4 6.27976 4 7.11984 4 8.8V15.2C4 16.8802 4 17.7202 4.32698 18.362C4.6146 18.9265 5.07354 19.3854 5.63803 19.673C6.27976 20 7.11984 20 8.8 20H15.2C16.8802 20 17.7202 20 18.362 19.673C18.9265 19.3854 19.3854 18.9265 19.673 18.362C20 17.7202 20 16.8802 20 15.2V11" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M4 16L8.29289 11.7071C8.68342 11.3166 9.31658 11.3166 9.70711 11.7071L13 15M13 15L15.7929 12.2071C16.1834 11.8166 16.8166 11.8166 17.2071 12.2071L20 15M13 15L15.25 17.25" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M17 3L19 5M21 7L19 5M19 5L21 3M19 5L17 7" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>
      </div>
    </div>

    <button class="lightbox-nav next" aria-label="Next" type="button">
      <svg class="icon-svg" viewBox="0 0 24 24"><path d="M9 6l6 6-6 6" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" fill="none"/></svg>
    </button>
  </div>

  <!-- NOTE MODAL -->
  <div id="noteModal" class="modal hidden" aria-hidden="true" role="dialog" aria-modal="true" aria-label="Image note">
    <div class="modal-card">
      <div style="display:flex;justify-content:space-between;align-items:center;">
        <h3 style="margin:0">Note</h3>
        <div style="display:flex;gap:8px;align-items:center;">
          <button id="noteCloseBtn" class="icon-btn" aria-label="Close note" type="button">
            <svg class="icon-svg" viewBox="0 0 24 24"><path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
          </button>
        </div>
      </div>

      <div id="noteView" style="margin-top:10px;"></div>
      <textarea id="noteTextarea" class="hidden" style="margin-top:8px;"></textarea>

      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px;">
        <button id="noteEditBtn" class="btn" type="button" aria-label="Edit note">Edit</button>
        <button id="noteSaveBtn" class="btn primary hidden" type="button" aria-label="Save note">Save</button>
        <span class="note-spinner hidden" id="noteSpinner" aria-hidden="true"></span>
      </div>
    </div>
  </div>

  <!-- CAMERA MODAL (UPDATED) -->
  <div id="cameraModal" class="modal hidden" aria-hidden="true" role="dialog" aria-modal="true" aria-label="Camera capture">
    <div class="camera-modal-inner">
      <div class="camera-preview-wrap" aria-live="polite">
        <video id="cameraPreview" autoplay playsinline></video>
        <div id="videoFlash" class="video-flash" aria-hidden="true"></div>
      </div>

      <!-- controls pinned to bottom, center capture -->
      <div class="camera-controls" role="toolbar" aria-label="Camera controls">
        <button id="switchCameraBtn" class="icon-btn circle" aria-label="Switch camera" title="Switch camera" type="button">
          <svg class="icon-svg" viewBox="0 0 24 24"><path d="M21 12a9 9 0 1 0-2.6 6.1" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" fill="none"/><path d="M21 3v6h-6" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" fill="none"/></svg>
        </button>

        <button id="captureBtn" class="capture-btn" aria-label="Capture photo" title="Capture" type="button">
          <svg width="84" height="84" viewBox="0 0 84 84" aria-hidden="true">
            <circle cx="42" cy="42" r="36" stroke="#ffffff" stroke-width="4" fill="none" opacity="0.95"/>
            <circle cx="42" cy="42" r="18" fill="#ffffff" opacity="0.96"/>
          </svg>
        </button>

        <button id="closeCameraBtn" class="icon-btn circle ghost" aria-label="Close camera" title="Close" type="button">
          <svg class="icon-svg" viewBox="0 0 24 24"><path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
        </button>
      </div>
    </div>
  </div>

  <!-- FAB -->
  <div class="fab-wrap">
    <button id="fabOpen" class="fab" aria-label="Open actions" title="Upload or capture" aria-expanded="false" aria-controls="fabOptions" type="button">
      <svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 5v14m7-7H5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" fill="none"/></svg>
    </button>

    <div id="fabOptions" class="fab-options hidden" aria-hidden="true">
      <label for="imageInput" id="fabUploadLabel" class="fab-option" role="button" tabindex="0" aria-label="Upload image">
        <svg class="icon-svg" viewBox="0 0 24 24"><path d="M0 16v-1.984q0-3.328 2.336-5.664t5.664-2.336q1.024 0 2.176 0.352 0.576-2.752 2.784-4.544t5.056-1.824q3.296 0 5.632 2.368t2.368 5.632q0 0.896-0.32 2.048 0.224-0.032 0.32-0.032 2.464 0 4.224 1.76t1.76 4.224v2.016q0 2.496-1.76 4.224t-4.224 1.76h-0.384q0.288-0.8 0.352-1.44 0.096-1.312-0.32-2.56t-1.408-2.208l-4-4q-1.76-1.792-4.256-1.792t-4.224 1.76l-4 4q-0.96 0.96-1.408 2.24t-0.32 2.592q0.032 0.576 0.256 1.248-2.72-0.608-4.512-2.784t-1.792-5.056zM10.016 22.208q-0.096-0.96 0.576-1.6l4-4q0.608-0.608 1.408-0.608 0.832 0 1.408 0.608l4 4q0.672 0.64 0.608 1.6-0.032 0.288-0.16 0.576-0.224 0.544-0.736 0.896t-1.12 0.32h-1.984v6.016q0 0.832-0.608 1.408t-1.408 0.576-1.408-0.576-0.576-1.408v-6.016h-2.016q-0.608 0-1.088-0.32t-0.768-0.896q-0.096-0.288-0.128-0.576z" fill="currentColor"></path></svg>
      </label>
      <button id="openCameraBtn" class="fab-option" aria-label="Open camera" title="Camera" type="button">
        <svg class="icon-svg" viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.59843 4.48666C7.86525 3.17678 9.03088 2.25 10.3663 2.25H13.6337C14.9691 2.25 16.1347 3.17678 16.4016 4.48666C16.4632 4.78904 16.7371 5.01086 17.022 5.01086H17.0384L17.0548 5.01157C18.4582 5.07294 19.5362 5.24517 20.4362 5.83558C21.0032 6.20757 21.4909 6.68617 21.871 7.24464C22.3439 7.93947 22.5524 8.73694 22.6524 9.70145C22.75 10.6438 22.75 11.825 22.75 13.3211V13.4062C22.75 14.9023 22.75 16.0835 22.6524 17.0258C22.5524 17.9903 22.3439 18.7878 21.871 19.4826C21.4909 20.0411 21.0032 20.5197 20.4362 20.8917C19.7327 21.3532 18.9262 21.5567 17.948 21.6544C16.9903 21.75 15.789 21.75 14.2634 21.75H9.73657C8.21098 21.75 7.00967 21.75 6.05196 21.6544C5.07379 21.5567 4.26731 21.3532 3.56385 20.8917C2.99682 20.5197 2.50905 20.0411 2.12899 19.4826C1.65612 18.7878 1.44756 17.9903 1.34762 17.0258C1.24998 16.0835 1.24999 14.9023 1.25 13.4062V13.3211C1.24999 11.825 1.24998 10.6438 1.34762 9.70145C1.44756 8.73694 1.65612 7.93947 2.12899 7.24464C2.50905 6.68617 2.99682 6.20757 3.56385 5.83558C4.46383 5.24517 5.5418 5.07294 6.94523 5.01157L6.96161 5.01086H6.978C7.26288 5.01086 7.53683 4.78905 7.59843 4.48666ZM10.3663 3.75C9.72522 3.75 9.18905 4.19299 9.06824 4.78607C8.87258 5.74659 8.021 6.50186 6.99633 6.51078C5.64772 6.57069 4.92536 6.73636 4.38664 7.08978C3.98309 7.35452 3.63752 7.6941 3.36906 8.08857C3.09291 8.49435 2.92696 9.01325 2.83963 9.85604C2.75094 10.7121 2.75 11.8156 2.75 13.3636C2.75 14.9117 2.75094 16.0152 2.83963 16.8712C2.92696 17.714 3.09291 18.2329 3.36906 18.6387C3.63752 19.0332 3.98309 19.3728 4.38664 19.6375C4.80417 19.9114 5.33844 20.0756 6.20104 20.1618C7.07549 20.2491 8.20193 20.25 9.77778 20.25H14.2222C15.7981 20.25 16.9245 20.2491 17.799 20.1618C18.6616 20.0756 19.1958 19.9114 19.6134 19.6375C20.0169 19.3728 20.3625 19.0332 20.6309 18.6387C20.9071 18.2329 21.073 17.714 21.1604 16.8712C21.2491 16.0152 21.25 14.9117 21.25 13.3636C21.25 11.8156 21.2491 10.7121 21.1604 9.85604C21.073 9.01325 20.9071 8.49435 20.6309 8.08857C20.3625 7.6941 20.0169 7.35452 19.6134 7.08978C19.0746 6.73636 18.3523 6.57069 17.0037 6.51078C15.979 6.50186 15.1274 5.74659 14.9318 4.78607C14.8109 4.19299 14.2748 3.75 13.6337 3.75H10.3663ZM12 10.75C10.7574 10.75 9.75 11.7574 9.75 13C9.75 14.2426 10.7574 15.25 12 15.25C13.2426 15.25 14.25 14.2426 14.25 13C14.25 11.7574 13.2426 10.75 12 10.75ZM8.25 13C8.25 10.9289 9.92893 9.25 12 9.25C14.0711 9.25 15.75 10.9289 15.75 13C15.75 15.0711 14.0711 16.75 12 16.75C9.92893 16.75 8.25 15.0711 8.25 13ZM17.25 10C17.25 9.58579 17.5858 9.25 18 9.25H19C19.4142 9.25 19.75 9.58579 19.75 10C19.75 10.4142 19.4142 10.75 19 10.75H18C17.5858 10.75 17.25 10.4142 17.25 10Z" fill="currentColor"></path></svg>
      </button>
    </div>
  </div>

  <div id="toast" class="toast hidden" role="status" aria-live="polite" aria-atomic="true"></div>

  <script src="script.js" defer></script>
</body>
</html>



