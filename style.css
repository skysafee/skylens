/* ===========================
   SkyLens â€” style.css (compact + camera + icons)
   =========================== */

/* ---------- Theme variables ---------- */
:root{
  --bg:#0f1724;
  --text:#e6eef8;
  --muted:rgba(255,255,255,0.65);
  --accent:#4caf50;
  --danger:#ff5e57;
  --card: rgba(255,255,255,0.03);
  --surface: rgba(255,255,255,0.04);

  --gap:6px;                /* tightened gap for compact grid */
  --page-padding:12px;
  --topbar-height:64px;
  --thumb-min:110px;        /* min thumbnail size - adjust to taste */
}

/* theme variants */
body.theme-default  { --bg:#0f1724; --accent:#4caf50; }
body.theme-dark     { --bg:#0b1220; --accent:#2196f3; }
body.theme-ocean    { --bg:linear-gradient(180deg,#001f3f,#012a4a); --accent:#00aced; }
body.theme-sunset   { --bg:linear-gradient(180deg,#2e1a47,#2b1b3d); --accent:#ff5e5e; }

/* ---------- base ---------- */
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;color:var(--text);background:var(--bg)}
.hidden{display:none!important}
.visually-hidden{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap;border:0;padding:0;margin:-1px}

/* prefer reduced motion */
@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; animation: none !important; scroll-behavior: auto !important; }
}

/* ---------- topbar ---------- */
.topbar{position:fixed;inset:0 0 auto 0;height:var(--topbar-height);backdrop-filter:blur(8px);background:linear-gradient(180deg, rgba(0,0,0,0.22), rgba(0,0,0,0.08));border-bottom:1px solid rgba(255,255,255,0.03);z-index:1200}
.topbar-inner{max-width:1200px;margin:0 auto;height:100%;display:flex;align-items:center;justify-content:space-between;padding:0 var(--page-padding)}
.brand{display:flex;align-items:center;gap:10px;font-weight:700}
.brand .app-name{font-size:1rem}
.top-right{display:flex;align-items:center;gap:8px}
body.no-auth .top-right{display:none!important}

/* controls */
.control{height:36px;padding:6px 10px;border-radius:10px;background:transparent;color:var(--text);border:1px solid rgba(255,255,255,0.04)}
.icon-btn{display:inline-flex;align-items:center;justify-content:center;padding:6px;border-radius:8px;background:var(--card);border:none;color:var(--text);cursor:pointer}

/* ---------- layout ---------- */
.page{max-width:1200px;margin:calc(var(--topbar-height)+12px) auto 80px;padding:0 var(--page-padding)}

/* ---------- offline banner ---------- */
.offline-banner, #offlineStatus {
  position: fixed; top: var(--topbar-height); left: 50%; transform: translateX(-50%);
  background: rgba(0,0,0,0.7); color: #fff; padding: 8px 12px; border-radius: 8px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.6); z-index: 1400; font-weight:600;
  font-size: 0.9rem;
}

/* ---------- compact gallery (grid) ---------- */
/* Google-Photos-like compact grid using CSS Grid */
.gallery-grid{
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(var(--thumb-min), 1fr));
  gap: var(--gap);
  width:100%;
  margin:0;
  padding:0;
}

/* each tile */
.gallery-item{
  position:relative;
  width:100%;
  aspect-ratio:1/1; /* force square thumbnails */
  overflow:hidden;
  border-radius:6px;
  background:var(--card);
  cursor:pointer;
  transition: transform .12s ease, box-shadow .12s ease;
  -webkit-tap-highlight-color: transparent;
}
.gallery-item img{width:100%;height:100%;object-fit:cover;display:block;transform-origin:center center;transition:transform .18s ease, opacity .15s ease;opacity:0}
.gallery-item.loaded img{opacity:1;transform:none}
.gallery-item:hover{transform: translateY(-4px); box-shadow:0 6px 18px rgba(0,0,0,0.45)}
.gallery-item:hover img{transform: scale(1.03)}

/* skeleton for square tiles */
.gallery-item .skeleton{width:100%;height:100%;display:block;background:linear-gradient(90deg, rgba(255,255,255,0.02) 0%, rgba(255,255,255,0.04) 50%, rgba(255,255,255,0.02) 100%);background-size:200% 100%;animation: shimmer 1.2s linear infinite}
@keyframes shimmer{0%{background-position:200% 0}100%{background-position:-200% 0}}

/* broken placeholder */
.gallery-item .broken{display:flex;align-items:center;justify-content:center;padding:12px;color:var(--muted);font-weight:700}

/* ---------- footer ---------- */
.gallery-footer{display:flex;align-items:center;justify-content:center;gap:12px;margin-top:12px}

/* spinner */
.spinner{width:28px;height:28px;border-radius:50%;border:3px solid rgba(255,255,255,0.06);border-top-color:var(--accent);animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

/* ---------- lightbox ---------- */
.lightbox{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg, rgba(0,0,0,0.6), rgba(0,0,0,0.85));z-index:1300;padding:12px}
.lightbox-content{max-width:100%;width:100%;max-height:90vh;display:flex;flex-direction:column;align-items:center;gap:10px}
.lightbox img{max-width:100%;max-height:80vh;border-radius:8px;object-fit:contain;box-shadow:0 20px 40px rgba(0,0,0,0.6)}
.lightbox-close{position:absolute;top:16px;right:16px;background:transparent;border-radius:8px;padding:8px}
.lightbox-nav{position:absolute;top:50%;transform:translateY(-50%);background:transparent;border:none;color:var(--text);font-size:26px;padding:8px;cursor:pointer}
.lightbox-nav.prev{left:8px}
.lightbox-nav.next{right:8px}
/* hide nav icons on small screens to save space (swipe handles it) */
@media (max-width:640px){ .lightbox-nav{display:none} }

/* ---------- note modal polish ---------- */
#noteModal .modal-inner{background:var(--card);border-radius:12px;padding:14px;color:var(--text)}
#noteModal #noteView{padding:10px;min-height:80px;white-space:pre-wrap}
#noteModal #noteTextarea{width:100%;min-height:120px;padding:10px;border-radius:8px;background:var(--surface);border:1px solid rgba(255,255,255,0.03);color:var(--text)}
#noteModal .btn{min-width:80px}

/* note spinner */
#noteModal .note-spinner{width:18px;height:18px;border-radius:50%;border:2px solid rgba(255,255,255,0.06);border-top-color:var(--accent);animation:spin .9s linear infinite;display:inline-block;margin-left:8px}
#noteModal .note-spinner.hidden{display:none}

/* ---------- camera modal polish ---------- */
.modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:1400}
.modal-inner{background:transparent;border-radius:12px}
.camera-preview-wrap{position:relative;width:100%;max-width:420px;border-radius:12px;overflow:hidden;background:#000}
.video-flash{position:absolute;inset:0;background:#fff;opacity:0;pointer-events:none;transition:opacity .2s ease}
.camera-controls{display:flex;gap:8px;justify-content:center;margin-top:10px}

/* ---------- FAB / actions ---------- */
.fab-wrap{position:fixed;right:14px;bottom:18px;z-index:1250;display:flex;flex-direction:column;align-items:flex-end;gap:8px}
.fab{width:56px;height:56px;border-radius:999px;background:var(--accent);color:#fff;border:none;display:flex;align-items:center;justify-content:center;font-size:20px;cursor:pointer;box-shadow:0 12px 30px rgba(0,0,0,0.45)}
.fab-options{display:flex;flex-direction:column;gap:8px;margin-bottom:6px}
.fab-option{display:inline-flex;align-items:center;justify-content:center;padding:10px 12px;background:var(--card);border-radius:10px;cursor:pointer;color:var(--text);border:1px solid rgba(255,255,255,0.03)}

/* hide FAB on auth screen same as top-right */
body.no-auth .fab-wrap{display:none!important}

/* ---------- icon button sizing ---------- */
.icon-svg{width:20px;height:20px;display:block;vertical-align:middle;fill:currentColor}

/* ---------- small screens ---------- */
@media (max-width:900px){ :root{--thumb-min:92px} .page{padding:0 10px} }
@media (max-width:520px){ :root{--thumb-min:86px} .brand .app-name{display:none} .topbar{height:56px} .page{margin-top:68px} .fab{width:52px;height:52px} }

/* ---------- minor helpers ---------- */
.center{display:flex;align-items:center;justify-content:center}
.btn{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:8px;border:none;background:var(--card);color:var(--text);cursor:pointer}

/* end */
